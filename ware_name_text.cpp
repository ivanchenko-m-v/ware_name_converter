/// $Header
/// ============================================================================
///		Author		: M. Ivanchenko
///		Date create	: 18-03-2016
///		Date update	: 18-03-2016
///		Comment		:
/// ============================================================================

#include "ware_name_text.h"
#include <QRegExp>

namespace rele_auto
{

/// ############################################################################
///			class ware_name_text
/// ############################################################################

    /// ========================================================================
    ///		CONSTRUCTORS/DESTRUCTOR
    /// ========================================================================

    /// ------------------------------------------------------------------------
	///	ware_name_text( )
    /// ------------------------------------------------------------------------
	ware_name_text::ware_name_text( const QString &text ) :
		QString( text )
	{
		this->prepare( );
	}

    /// ------------------------------------------------------------------------
	///	~ware_name_text( )
    /// ------------------------------------------------------------------------
	ware_name_text::~ware_name_text( )
	{
	}

    /// ========================================================================
    ///		PROPERTIES
    /// ========================================================================

    /// ========================================================================
    ///		OPERATORS
    /// ========================================================================

    /// ========================================================================
    ///		FUNCTIONS
    /// ========================================================================
    /// ------------------------------------------------------------------------
	///	prepare( )
    /// ------------------------------------------------------------------------
	void ware_name_text::prepare( )
	{
		//варианты с русской 'З'
		this->prepare_3( );
	}

    /// ------------------------------------------------------------------------
	///	prepare_3( )
    /// ------------------------------------------------------------------------
	void ware_name_text::prepare_3( )
	{
		//русская буква 'З'
		QRegExp rx3( "З", Qt::CaseSensitive, QRegExp::RegExp2 );
		int pos = rx3.indexIn( *this );
		if( pos == -1 )
		{
			return;
		}
		//сочетание русских 'ЗЗ'
		if( this->prepare_33H( ) )
		{
		}
		else if( this->prepare_3v( ) )
		{
		}
		else if( this->prepare_d3t( ) )
		{
		}
		else if( this->prepare_1_3( ) )
		{
		}
		else if( this->prepare_A3( ) )
		{
		}
		else
		{
			//в остальных случаях замена русской 'З' на тройку
			this->replace( rx3, "3" );
		}
	}

    /// ------------------------------------------------------------------------
	///	prepare_33H( )
    /// ------------------------------------------------------------------------
	bool ware_name_text::prepare_33H( )
	{
		//сочетание русских 'ЗЗ'
		QRegExp rx33H( "ЗЗ(?=[HНП]])", Qt::CaseSensitive, QRegExp::RegExp2 );
		int pos = rx33H.indexIn( *this );
		if( pos == -1 )
		{
			return false;
		}
		//если найдено, меняем на маленькие 'зз'
		this->replace( rx33H, "зз" );

		return true;
	}

    /// ------------------------------------------------------------------------
	///	prepare_33H( )
    /// ------------------------------------------------------------------------
	bool ware_name_text::prepare_3v( )
	{
		return true;
	}

    /// ------------------------------------------------------------------------
	///	prepare_33H( )
    /// ------------------------------------------------------------------------
	bool ware_name_text::prepare_d3t( )
	{
		return true;
	}

    /// ------------------------------------------------------------------------
	///	prepare_33H( )
    /// ------------------------------------------------------------------------
	bool ware_name_text::prepare_1_3( )
	{
		return true;
	}

    /// ------------------------------------------------------------------------
	///	prepare_33H( )
    /// ------------------------------------------------------------------------
	bool ware_name_text::prepare_A3( )
	{
		return true;
	}


/// ############################################################################
}//namespace rele_auto
